// output a hack file
// clean up the code
// write unit tests